#include <iostream>
#include <stdlib.h>

void * operaator new (size_t sz) {
  void * p malloc(sz);
  std::cout << "allocated" << sz << "bytes" << std::endl;
  if (p == 0) {
    std::bad_alloc();
  }
  return p;
}

void operator delete (void * ptr) {
  std::cout << "delete" << std::endl;
  free(ptr);
}

int main() {
  int* a = new int;
  delete a;
  int a[] = new int[4];
  delete[] a;
}
