Суммарная длина объединения отрезков на прямой.
          Создадим массив a, ячейки которого будут соответствовать
координатам на прямой. Проинициализируем его нулями. Теперь будем
добавлять отрезки: увеличивать значения в ячейках между заданными
координатами на единицу. Если удаляем отрезок, то уменьшаем
соответствующие значения.
Построим дерево отрезков поверх этого массива. В узлах будем хранить
суммарную длину объединения всех отрезков между соответствующими 
координатами. При добавлении отрезка, если какой-либо 0 в массиве
увеличился, то пперестраиваем дерево: в соответствующий данной
координате лист записываем 1, родитель этого листа увеличиваем на 1,
его родителя также увеличиваем на 1 и так вплоть до корня. При
удалении отрезка, если в какой-либо ячейке массива достигается 0,
снова перестаиваем дерево: уменьшаем соответствующий лист и всех его
родителей на 1.
Таким образом, мы имеем массив, в котором содержится инофрмация о том,
сколькими отрезками покрыта каждая координата и дерево отрезков поверх
этого массива, в листьях которого записана информация о том, покрыта
ли данная координата отрезком(ми), а в корне суммарная длина
объеднения всех отрезков(как сумма всех покрытых координат).

Уточнение.
Чтобы избежать недоразумений, оговорим отдельно, что длина отрезка
[m,m] равна 0 и не добавление/удаление такого отрезка не влияет на
нашу задачу, поэтому такие отрезки будут проверяться и отбрасываться
на этапе добавления/удаления.

Оценка сложности.
N - максимальная координата отрезков
n - число операций вставки/удаления.
По памяти.
O(N) - на массив a. O(N*logN) на дерево.
O(N*logN)
По времени.
В наихудшем случае(постоянном добавлении/удалении непересекающихся
отрезков) O(n*logN) на перестроение дерева.В худшем случае(при
добавлении/удалении очень длинных отрезков) O(N) на перезаполнение
массива a.

Оптимизации.
Можно не перезаполнять массив a при каждой операции встаки/удаления
отрезка, а завести в вершинах дерева отрезков дополнительное поле, в
котором хранить информацию на сколько нужно увеличить/уменьшить каждую 
ячейку на соответствующем отрезке, а также поле с суммарной длинной 
отрезка. Пересчет же вести только при работе с конкретной ячейкой 
массива(например, когда на отрезке были заполнены не все координаты и
добавили отрезок в этот промежуток). Таким образом можно уменьшить 
учетную стоимость операций добавления/удаления отрезков.
